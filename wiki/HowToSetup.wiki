#summary How to set up and run iqr-gazebo.
#labels SettingUp

= Introduction =

For iqr-gazebo to work you need to install both iqr and gazebo and then compile the iqr module as well as the gazebo plugins. This instructions are for Ubuntu OS. Please use the analog commands for different linux distributions


= How To Step by Step=

===Install General Packages===
Install general packages used to compile and run iqr-gazebo
{{{
sudo apt-get install gdebi subversion build-essential cmake libqt4-dev 

}}}

If you have already installed the latest version of gazebo and iqr continue at step *Setting environment variables*

===Install IQR===
Download the binary packages for ubuntu form http://sourceforge.net/projects/iqr/files/iqr/ and install using:
{{{
sudo gdebi iqr-2.4.1.Ubuntu-xxx-xxx.deb

}}}
You have to introduce this command in the directory where you have downloaded the files. Please replace the xxx-xxx with the file name you have downloaded corresponding to your os. 


Download the developer files from http://sourceforge.net/projects/iqr/files/iqr-devel/2.0.0/ and install using:
{{{
sudo dpkg -i iqr-dev_2.0-0.ubuntu_debian.i386.deb

}}}

===Install Gazebo===

Install Gazebo following the instruction on: http://gazebosim.org/wiki/2.2/install

=== Get the iqr-gazebo Files ===
Check out the files using svn to your home directory. 
{{{
cd $HOME
svn checkout http://iqr-gazebo.googlecode.com/svn/trunk/ iqr-gazebo

}}}

=== Setting environment variables ===
Append the following lines to your .profile file in the home directory using gedit.
{{{
export GAZEBO_MODEL_PATH=$HOME/iqr-gazebo/gazebo_files/models
export GAZEBO_PLUGIN_PATH=$HOME/iqr-gazebo/gazebo_files/plugins
}}}
or use the following commands to add them from the console line
{{{
echo 'export GAZEBO_MODEL_PATH=$HOME/iqr-gazebo/gazebo_files/models' >> $HOME/.profile
echo 'export GAZEBO_PLUGIN_PATH=$HOME/iqr-gazebo/gazebo_files/plugins' >> $HOME/.profile

}}}

Please *logout and login again* to make sure the file is sourced. 




== Install iqr-gazebo  ==

To build the necessary iqr moudles and gazebo plugins please run the following script:
{{{
cd $HOME/iqr-gazebo
sh ./update_compile.sh
}}}

If the script fails please follow the instruction at the end of the document. You can use the same script for updating and compiling the iqr-gazebo project from the svn repository. 

===Run gazebo and iqr===
You are all setup. Run gazebo first and than iqr in two different terminals.

In the first terminal:
{{{
cd $HOME/iqr-gazebo/gazebo_files
gazebo SDIC_arena.world

}}}

In the second terminal:
{{{
cd $HOME/iqr-gazebo/iqr_files
iqr -f  gazeboBug.iqr

}}}

Press run in iqr. You should see the robot driving around the arena avoiding walls. Check out the sensory states of the robot using the space plot tool. 



== In case things go wrong... ==
Build the iqr modules and gazebo plugins without the script. 

=== Build the iqr module ==
Compile the moduleGazeboBug module.
{{{
cd $HOME/iqr-gazebo/iqr_module
mkdir build
cd build
cmake ..
make install

}}}

=== Build the gazebo plugins ==
Compile the gazebo vel_plugin.
{{{
cd $HOME/iqr-gazebo/gazebo_files/vel_plugin
mkdir build
cd build
cmake ..
make install

}}}

Compile the gazebo target_plugin.
{{{
cd $HOME/iqr-gazebo/gazebo_files/target_plugin
mkdir build
cd build
cmake ..
make install

}}}